<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swatch Internet Time Clock</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Courier New', monospace;
            background: transparent;
            text-align: center;
            color: #333;
        }
        .swatch-clock {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .swatch-clock a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s ease;
        }
        .swatch-clock a:hover {
            opacity: 0.8;
        }
        .info {
            font-size: 0.9em;
            margin-top: 15px;
            opacity: 0.8;
        }
        .beat-info {
            font-size: 0.7em;
            margin-top: 10px;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <div id="swatchClock" class="swatch-clock">@000.00</div>
    <div class="info">Swatch Internet Time</div>
    <div class="beat-info" id="beatInfo">Loading...</div>
    
    <script>
        function updateClock() {
            try {
                const now = new Date();
                
                // Get UTC time components
                const utcHours = now.getUTCHours();
                const utcMinutes = now.getUTCMinutes();
                const utcSeconds = now.getUTCSeconds();
                const utcMilliseconds = now.getUTCMilliseconds();
                
                // Convert to Biel Mean Time (UTC+1)
                const bmtHours = (utcHours + 1) % 24;
                
                // Calculate total seconds since BMT midnight
                const totalSeconds = (bmtHours * 3600) + (utcMinutes * 60) + utcSeconds + (utcMilliseconds / 1000);
                
                // Convert to beats (1000 beats per day = 86400 seconds)
                // 1 beat = 86.4 seconds
                const beats = totalSeconds / 86.4;
                
                // Format to 2 decimal places
                const formattedBeats = beats.toFixed(2);
                
                // Update the display
                const clockElement = document.getElementById('swatchClock');
                if (clockElement) {
                    clockElement.innerHTML = '<a href="https://wiki.melonland.net/swatch_time" target="_blank">@' + formattedBeats + '</a>';
                }
                
                // Update beat info
                const currentBeat = Math.floor(beats);
                const beatsToMidnight = 1000 - currentBeat;
                const beatInfoElement = document.getElementById('beatInfo');
                if (beatInfoElement) {
                    beatInfoElement.textContent = 'Beat ' + currentBeat + ' â€¢ ' + beatsToMidnight + ' beats until @000';
                }
                
            } catch (error) {
                console.error('Clock update error:', error);
                // Fallback display
                document.getElementById('swatchClock').innerHTML = '@ERROR';
                document.getElementById('beatInfo').textContent = 'Clock error - check console';
            }
        }
        
        // Update immediately when page loads
        updateClock();
        
        // Update every 864ms (1 beat = 86.4 seconds, so update roughly every second for smooth display)
        setInterval(updateClock, 864);
        
        // Also update every 10 seconds as a backup
        setInterval(updateClock, 10000);
        
        // Debug info (remove this after testing)
        console.log('Swatch clock initialized at:', new Date());
        console.log('Initial update in 3 seconds...');
        setTimeout(() => {
            console.log('Current time:', new Date());
            console.log('Clock should be updating now');
        }, 3000);
    </script>
</body>
</html>
